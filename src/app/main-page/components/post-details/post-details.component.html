<alerts-outlet></alerts-outlet>

<div class="p-5">
  <div class="d-flex flex-row justify-content-between align-items-center pb-4" *ngIf="post && userId">
    <button class="btn btn-info" routerLink="/">Go Back</button>

    <!--suppress ALL-->
    <likes-widget
      [likes]="post.likes"
      [likedByUser]="likedByUser"
      (onLikedOrDisliked)="$event ? addLike(post.id, userId) : removeLike(post, userId)"
    ></likes-widget>
  </div>

  <div class="" *ngIf="post">
    <img *ngIf="isImagePost(post)" [src]="getImgUrl(post)" alt="post_image" />

    <p *ngIf="!editModeEnabled; else editPost" [innerText]="post.text || ''"></p>

    <button *ngIf="!editModeEnabled" class="btn btn-success" (click)="editModeEnabled = true">Edit</button>
  </div>
</div>

<ng-template #editPost>
  <textarea [(ngModel)]="postText" class="form-control" rows="4"></textarea>

  <div class="d-flex flex-row">
    <button class="btn btn-success mr-2" (click)="savePost()">Save</button>
    <button class="btn btn-danger" (click)="editModeEnabled = false">Cancel</button>
  </div>
</ng-template>

<script src="../../../core/custom-elements/likes/runtime.js" type="module"></script>
<script src="../../../core/custom-elements/likes/polyfills.js" type="module"></script>
<script src="../../../core/custom-elements/likes/main.js" type="module"></script>
